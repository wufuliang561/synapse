(Synapse) - 产品需求文档 (PRD)
文档版本: V1.3 (定稿)

状态: 已批准，可用于开发

1. 核心设计哲学
Synapse的一切设计都服务于一个核心哲学：宏观编排，微观沉浸 (Macro-Orchestration, Micro-Immersion)。

宏观编排 (画布模式): 为用户提供上帝视角，让他们能轻松地理解、管理和导航自己复杂的思维网络。这是战略层。

微观沉浸 (聊天模式): 为用户提供一个无干扰的、专注的对话环境，让他们能深入思考和创造。这是执行层。

产品的所有交互都必须强化这个分离又统一的体验，确保用户在两个模式间的切换无缝、直观且有意义。

2. 关键概念定义
为确保团队沟通的一致性，以下为产品核心概念的唯一解释：

概念	定义
主题 (Topic)	顶级容器，代表一个独立的项目或思考任务。每个主题拥有自己独立的画布。
画布模式 (Canvas Mode)	产品的默认战略视图。用于展示一个主题下所有消息节点的网状结构。此模式下不可直接对话。
聊天模式 (Chat Mode)	沉浸式线性对话视图。用于阅读上下文、继续对话和创建新分支。
消息节点 (Node)	画布上的最小单位，代表一条消息。必须清晰展示 作者(用户/AI) 和 消息内容摘要。
分支 (Branch)	从任意一个已存在的消息节点上，创建一条新的、独立的对话路径的行为及其结果。

Export to Sheets
3. 核心用户工作流 (MVP)
本节将替代传统的功能列表，以用户行为为中心，描述产品的核心使用流程。

步骤一：创建与组织 (Creation & Organization)
启动应用: 用户看到一个三栏式布局的界面。左侧为主题列表侧边栏，中间为画布区域。

创建主题: 用户点击侧边栏顶部的“+ 新建主题”。一个新的主题被创建并自动选中，右侧画布为空白。

需求: 主题管理功能（创建、切换、重命名、删除）必须稳定且响应迅速。这是用户组织工作的基础。

步骤二：概览与导航 (Overview & Navigation)
默认视图: 当用户选中一个已有内容的主题时，界面必须默认展示画布模式。

画布探索: 用户在画布模式下，可以：

缩放/平移: 自由探索整个思维网络。

理解结构: 通过节点和连线，一目了然地看到对话是如何发展和分叉的。

进入沉浸模式: 当用户希望深入某条对话线时，他们单击画布上的任意一个消息节点。

需求: 画布操作必须流畅，即使在节点数量增多时也不能有明显卡顿。

步骤三：沉浸与交互 (Immersion & Interaction)
切换至聊天模式: 单击节点后，画布区域必须平滑过渡为聊天模式。

界面呈现:

聊天界面必须线性展示从根节点到用户所点击节点所在分支末端的所有消息。

界面必须自动滚动到用户所点击的那条消息的位置。

界面顶部必须有一个固定的“返回画布”按钮。

界面底部必须有一个对话输入框。

继续对话: 用户可以在输入框中输入内容，对当前分支进行延伸。新的对话会追加在列表末尾。

步骤四：探索与创造 (The Core Loop: Branching)
这是产品的魔法时刻，其交互流程必须精准、无误、零歧义。

前提: 用户必须处于聊天模式。

触发: 用户将鼠标悬停在任意一条消息上，一个分支图标 ✨ 必须出现。

配置: 用户点击 ✨ 图标，一个模态窗口必须弹出，包含：

分支名称 (文本输入框, 必填)

AI 模型 (下拉菜单, 可选)

执行与转换 (The Critical Transition): 用户填写信息并点击“创建”后，必须发生以下一系列不可分割的原子操作：

4.1. 模态窗口关闭。

4.2. 系统自动、强制性地将用户带回画布模式。 不存在停留在聊天模式的选项。

4.3. 在画布上，从用户触发分支的那个消息节点处，必须生长出一条新的连线，指向一个新的、带有高亮或动画效果的消息节点。这个视觉反馈是强制性的，用于立刻将用户的注意力引导到这个新生命的诞生上。

开始新探索: 用户现在处于画布模式，清晰地看到了新分支。他可以通过单击这个新的高亮节点，再次进入聊天模式，开始在新分支中进行第一次对话。

4. 非功能性需求 
性能: 画布在包含50个以上节点时，平移和缩放操作的帧率不低于30 FPS。AI首次响应时间应在5秒以内。

易用性: 核心操作（创建主题、创建分支、对话）无需任何引导，用户应能在30秒内理解并上手。

兼容性: 优先支持最新版的Chrome和Safari浏览器。

数据存储: MVP阶段支持匿名使用，用户所有数据（主题、画布内容）存储在本地浏览器（localStorage）。